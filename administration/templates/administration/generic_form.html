{% extends "administration/base.html" %}
{% load capture_tags %}

{% block title %}{{ title }}{{ config.SITE_ADMIN_SUFFIX|default:" - Rosetta Dashboard" }}{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="text-sm breadcrumbs mb-4">
        <ul>
            <li><a href="{% url 'administration:index' %}">首页</a></li>
            <li>{{ title|default:"编辑" }}</li>
        </ul>
    </div>

    {% captureas card_content %}
    <div class="p-6">
        <h2 class="card-title mb-6 flex items-center gap-2">
            <span class="material-symbols-outlined text-primary">edit_note</span>
            {{ title|default:"编辑内容" }}
        </h2>
        
        <form method="post" class="space-y-4" enctype="multipart/form-data">
            {% csrf_token %}
            
            {% for field in form %}
            <div class="form-control w-full">
                {% if field.field.widget.input_type == 'checkbox' %}
                <label class="label cursor-pointer justify-start gap-3">
                    <span class="label-text font-medium">{{ field.label }}</span>
                    {{ field }}
                </label>
                {% else %}
                <label class="label">
                    <span class="label-text font-medium">{{ field.label }}</span>
                </label>
                {{ field }}
                {% endif %}
                
                {% if field.help_text %}
                <label class="label">
                    <span class="label-text-alt text-base-content/60">{{ field.help_text }}</span>
                </label>
                {% endif %}
                {% if field.errors %}
                <label class="label">
                    <span class="label-text-alt text-error flex items-center gap-1">
                        <span class="material-symbols-outlined text-xs">error</span>
                        {{ field.errors.0 }}
                    </span>
                </label>
                {% endif %}
            </div>
            {% endfor %}
            
            <div class="card-actions justify-end mt-8 pt-4 border-t border-base-200">
                <a href="javascript:history.back()" class="btn btn-ghost">取消</a>
                <button type="submit" name="_addanother" class="btn btn-ghost">保存并新增</button>
                <button type="submit" name="_continue" class="btn btn-ghost">保存并继续编辑</button>
                <button type="submit" class="btn btn-primary gap-2">
                    <span class="material-symbols-outlined">save</span>
                    保存
                </button>
            </div>
        </form>
    </div>
    {% endcaptureas %}
    {% include 'components/inspira/card_spotlight.html' with slot_content=card_content extra_classes="p-0 overflow-hidden rounded-2xl border-none shadow-none hover:shadow-none bg-base-100 border border-base-content/5" %}
</div>
{% endblock %}
