{% for log in logentries %}
<tr class="hover:bg-base-200/50 transition-colors duration-200 group">
    <td class="font-mono text-xs whitespace-nowrap text-base-content/60">
        {{ log.action_time|date:"Y-m-d" }}
        <span class="block text-base-content/40 text-[10px]">{{ log.action_time|date:"H:i:s" }}</span>
    </td>
    <td>
        <div class="flex items-center gap-3">
            <div class="avatar">
                <div class="w-9 h-9 rounded-full ring-2 ring-base-100 shadow-sm overflow-hidden">
                    <img src="{{ log.user.get_avatar_url }}" alt="{{ log.user.username }}" class="object-cover w-full h-full" loading="lazy" />
                </div>
            </div>
            <div class="flex flex-col">
                <span class="font-semibold text-sm text-base-content group-hover:text-primary transition-colors">{{ log.user.nickname|default:log.user.username }}</span>
                {% if log.user.nickname and log.user.username != log.user.nickname %}
                <span class="text-[10px] text-base-content/50 font-mono">@{{ log.user.username }}</span>
                {% endif %}
            </div>
        </div>
    </td>
    <td>
        {% if log.action_flag == 1 %}
        <div class="badge badge-success badge-sm gap-1 shadow-sm bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-500/20 dark:text-emerald-300 dark:border-emerald-500/30">
            <span class="material-symbols-outlined text-[14px]">add_circle</span>
            新增
        </div>
        {% elif log.action_flag == 2 %}
        <div class="badge badge-warning badge-sm gap-1 shadow-sm bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-500/20 dark:text-amber-300 dark:border-amber-500/30">
            <span class="material-symbols-outlined text-[14px]">edit</span>
            修改
        </div>
        {% elif log.action_flag == 3 %}
        <div class="badge badge-error badge-sm gap-1 shadow-sm bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-500/20 dark:text-rose-300 dark:border-rose-500/30">
            <span class="material-symbols-outlined text-[14px]">delete</span>
            删除
        </div>
        {% endif %}
    </td>
    <td>
        <div class="flex items-center gap-2" title="{{ log.content_type }}">
            <div class="w-2 h-2 rounded-full bg-primary/40 group-hover:bg-primary transition-colors"></div>
            <span class="text-xs font-medium text-base-content/70">{{ log.content_type }}</span>
        </div>
    </td>
    <td>
        <div class="font-mono text-xs text-primary/80 bg-primary/5 px-2 py-1 rounded border border-primary/10 max-w-[150px] truncate transition-all group-hover:bg-primary/10 group-hover:border-primary/20" title="{{ log.object_repr }}">
            {{ log.object_repr }}
        </div>
    </td>
    <td class="max-w-xs">
        <p class="text-xs text-base-content/60 truncate group-hover:text-base-content/80 transition-colors" title="{{ log.change_message }}">
            {{ log.change_message|default:"-" }}
        </p>
    </td>
    <td>
        <div class="tooltip tooltip-left" data-tip="删除记录">
            <a href="{% url 'administration:logentry_delete' log.pk %}" class="btn btn-xs btn-ghost btn-square text-base-content/40 hover:text-error hover:bg-error/10 transition-all">
                <span class="material-symbols-outlined text-lg">delete</span>
            </a>
        </div>
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="7">
        <div class="flex flex-col items-center justify-center py-12 text-base-content/40">
            <span class="material-symbols-outlined text-4xl mb-2">history_toggle_off</span>
            <p class="text-sm">暂无日志记录</p>
        </div>
    </td>
</tr>
{% endfor %}
