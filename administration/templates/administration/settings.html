{% extends "administration/base.html" %}

{% block title %}站点设置 - Rosetta 管理后台{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto" x-data="{ activeTab: 'general' }">
    <div class="mb-8 flex items-center justify-between">
        <div>
            <h1 class="text-3xl font-bold mb-2">站点设置</h1>
            <p class="text-base-content/60">管理网站的全局配置参数</p>
        </div>
        <div class="text-sm breadcrumbs">
            <ul>
                <li><a href="{% url 'administration:index' %}">首页</a></li>
                <li>站点设置</li>
            </ul>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Settings Navigation -->
        <div class="col-span-1">
            <ul class="menu bg-base-100 rounded-box w-full shadow-sm border border-base-200 sticky top-24">
                <li class="menu-title">设置分类</li>
                <li>
                    <a @click="activeTab = 'general'" :class="{ 'active': activeTab === 'general' }">
                        <span class="material-symbols-outlined">tune</span> 常规设置
                    </a>
                </li>
                <!-- Future tabs can be enabled here -->
                <li><a class="disabled opacity-50"><span class="material-symbols-outlined">palette</span> 外观定制 (Coming Soon)</a></li>
                <li><a class="disabled opacity-50"><span class="material-symbols-outlined">security</span> 安全隐私 (Coming Soon)</a></li>
            </ul>
        </div>

        <!-- Settings Form -->
        <div class="col-span-1 lg:col-span-2">
            <div class="card bg-base-100 shadow-sm border border-base-200" x-show="activeTab === 'general'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 translate-x-4" x-transition:enter-end="opacity-100 translate-x-0">
                <div class="card-body">
                    <form method="post" class="space-y-6">
                        {% csrf_token %}
                        
                        {% for key, item in config.items %}
                        <div class="form-control w-full group">
                            <label class="label">
                                <span class="label-text font-bold text-lg">{{ item.help_text|default:key }}</span>
                            </label>
                            
                            {% if item.type == 'bool' %}
                                <input type="checkbox" name="{{ key }}" class="toggle toggle-primary toggle-lg" {% if item.value %}checked{% endif %}>
                            {% elif item.type == 'int' %}
                                <input type="number" name="{{ key }}" value="{{ item.value }}" class="input input-bordered w-full focus:input-primary transition-all">
                            {% else %}
                                {% if 'TEXT' in key or 'DESCRIPTION' in key %}
                                    <textarea name="{{ key }}" class="textarea textarea-bordered w-full h-32 focus:textarea-primary transition-all text-base leading-relaxed" rows="4">{{ item.value }}</textarea>
                                {% else %}
                                    <input type="text" name="{{ key }}" value="{{ item.value }}" class="input input-bordered w-full focus:input-primary transition-all">
                                {% endif %}
                            {% endif %}
                            
                            <label class="label">
                                <span class="label-text-alt text-base-content/40 font-mono text-xs group-hover:text-primary/60 transition-colors">Key: {{ key }}</span>
                            </label>
                        </div>
                        <div class="divider my-2"></div>
                        {% endfor %}
                        
                        <div class="card-actions justify-end mt-8 pt-4">
                            <button type="submit" class="btn btn-primary btn-wide gap-2 shadow-lg hover:shadow-primary/30 transition-all">
                                <span class="material-symbols-outlined">save</span>
                                保存更改
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
