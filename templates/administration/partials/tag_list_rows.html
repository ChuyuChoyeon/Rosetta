{% load i18n %}
{% for tag in tags %}
<tr class="hover">
    <th class="pl-6">
        <label>
            <input type="checkbox" name="selected_ids" value="{{ tag.pk }}" class="checkbox checkbox-xs rounded-sm row-checkbox" onchange="updateBulkToolbar()" />
        </label>
    </th>
    <th class="font-mono text-xs opacity-50 hidden md:table-cell">{{ tag.id }}</th>
    <td>
        <div class="flex flex-col sm:flex-row sm:items-center gap-2">
            <a href="{% url 'administration:tag_edit' tag.pk %}" class="font-bold text-base hover:text-primary transition-colors block truncate max-w-[150px]" title="{{ tag.name }}">
                {{ tag.name }}
            </a>
            <div class="opacity-50 hidden sm:block">|</div>
            <div>
                {% if tag.color|first == '#' %}
                <span class="badge badge-sm badge-outline font-bold" style="border-color: {{ tag.color }}; color: {{ tag.color }}">{{ tag.name }}</span>
                {% else %}
                <span class="badge badge-{{ tag.color }} badge-sm badge-outline font-bold">{{ tag.name }}</span>
                {% endif %}
            </div>
            <div class="text-xs text-base-content/50 font-mono truncate lg:hidden">{{ tag.slug }}</div>
        </div>
    </td>
    <td class="font-mono text-xs text-base-content/60 hidden lg:table-cell">{{ tag.slug }}</td>
    <td class="hidden sm:table-cell">
        <div class="flex justify-center">
            {% if tag.is_active %}
                <div class="badge badge-success badge-sm gap-1 badge-outline bg-success/5 border-success/30">
                    <span class="w-1.5 h-1.5 rounded-full bg-success"></span>
                    {% trans "可见" %}
                </div>
            {% else %}
                <div class="badge badge-ghost badge-sm gap-1 badge-outline opacity-60">
                    <span class="w-1.5 h-1.5 rounded-full bg-base-content/40"></span>
                    {% trans "隐藏" %}
                </div>
            {% endif %}
        </div>
    </td>
    <td class="text-center hidden sm:table-cell">
        <span class="badge badge-ghost badge-sm font-mono">{{ tag.post_count }}</span>
    </td>
    <td class="text-right pr-4">
        <div class="join">
            <a href="{% url 'post_by_tag' tag.slug %}" target="_blank" class="btn btn-ghost btn-xs join-item tooltip tooltip-left" data-tip="{% trans '查看' %}">
                <span class="material-symbols-outlined text-base">visibility</span>
            </a>
            <a href="{% url 'administration:tag_edit' tag.pk %}" class="btn btn-ghost btn-xs join-item tooltip tooltip-left" data-tip="{% trans '编辑' %}">
                <span class="material-symbols-outlined text-base">edit</span>
            </a>
            <button type="button" 
                    hx-post="{% url 'administration:tag_delete' tag.pk %}"
                    hx-trigger="confirmed"
                    hx-target="closest tr"
                    hx-swap="outerHTML swap:0.5s"
                    onclick="confirmHtmx(this, '{% blocktrans with name=tag.name|escapejs %}确定要删除标签“{{ name }}”吗？{% endblocktrans %}')"
                    class="btn btn-ghost btn-xs join-item text-error tooltip tooltip-left" 
                    data-tip="{% trans '删除' %}">
                <span class="material-symbols-outlined text-base">delete</span>
            </button>
        </div>
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="7" class="text-center py-10 text-base-content/50">
        <div class="flex flex-col items-center gap-2">
            <span class="material-symbols-outlined text-4xl opacity-20">label</span>
            <span>{% trans "暂无标签" %}</span>
        </div>
    </td>
</tr>
{% endfor %}

